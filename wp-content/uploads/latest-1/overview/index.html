<!DOCTYPE html>
<html lang="zh-CN">
<head>
<base href="https://tencent.github.io/behaviac" />

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	 
	
	
	<title>behaviac概述 &#8211; behaviac</title>
<link rel='dns-prefetch' href='//cdn.bootcss.com' />




<link rel='stylesheet' id='ez-icomoon-css'  href='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/vendor/icomoon/style.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='ez-toc-css'  href='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/assets/css/screen.min.css' type='text/css' media='all' />
<style id='ez-toc-inline-css' type='text/css'>
div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 25%;}
</style>
<link rel='stylesheet' id='font-awesome-css'  href='//cdn.bootcss.com/font-awesome/4.1.0/css/font-awesome.min.css?ver=4.1.0' type='text/css' media='all' />
<link rel='stylesheet' id='owl-carousel-css'  href='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/css/owl.carousel.css' type='text/css' media='all' />
<link rel='stylesheet' id='owl-carousel-transitions-css'  href='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/css/owl.transitions.css' type='text/css' media='all' />
<link rel='stylesheet' id='colorbox-css'  href='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/css/colorbox.css' type='text/css' media='all' />
<link rel='stylesheet' id='tx-style-css'  href='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/css/tx-style.css' type='text/css' media='all' />
<link rel='stylesheet' id='behaviac-fonts-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/font.css' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/fonts/genericons.css' type='text/css' media='all' />
<link rel='stylesheet' id='animate-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/animate.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='behaviac-sidr-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/jquery.sidr.dark.css' type='text/css' media='all' />
<link rel='stylesheet' id='owl-carousel-theme-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/owl.theme.css' type='text/css' media='all' />
<link rel='stylesheet' id='behaviac-style-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='behaviac-blog-layout-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/twocol-blog.css' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='behaviac-ie-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/ie.css' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='behaviac-extra-stylesheet-css'  href='https://tencent.github.io/behaviac/contents/ui/theme/css/extra-style.css' type='text/css' media='all' />
<script type='text/javascript' src='https://tencent.github.io/behaviac/inc/js/jquery/jquery.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/inc/js/jquery/jquery-migrate.min.js'></script>









<style type="text/css">
a,a:visited,.blog-columns .comments-link a:hover {color: #95C837;}input:focus,textarea:focus {border: 1px solid #95C837;}button,input[type="submit"],input[type="button"],input[type="reset"],.nav-container .current_page_item > a > span,.nav-container .current_page_ancestor > a > span,.nav-container .current-menu-item > a span,.nav-container .current-menu-ancestor > a > span,.nav-container li a:hover span {background-color: #95C837;}.nav-container li:hover > a,.nav-container li a:hover {color: #95C837;}.nav-container .sub-menu,.nav-container .children {border-top: 2px solid #95C837;}.ibanner,.da-dots span.da-dots-current,.tx-cta a.cta-button {background-color: #95C837;}#ft-post .entry-thumbnail:hover > .comments-link,.tx-folio-img .folio-links .folio-linkico,.tx-folio-img .folio-links .folio-zoomico {background-color: #95C837;}.entry-header h1.entry-title a:hover,.entry-header > .entry-meta a:hover {color: #95C837;}.featured-area div.entry-summary > p > a.moretag:hover {background-color: #95C837;}.site-content div.entry-thumbnail .stickyonimg,.site-content div.entry-thumbnail .dateonimg,.site-content div.entry-nothumb .stickyonimg,.site-content div.entry-nothumb .dateonimg {background-color: #95C837;}.entry-meta a,.entry-content a,.comment-content a,.entry-content a:visited {color: #95C837;}.format-status .entry-content .page-links a,.format-gallery .entry-content .page-links a,.format-chat .entry-content .page-links a,.format-quote .entry-content .page-links a,.page-links a {background: #95C837;border: 1px solid #95C837;color: #ffffff;}.format-gallery .entry-content .page-links a:hover,.format-audio .entry-content .page-links a:hover,.format-status .entry-content .page-links a:hover,.format-video .entry-content .page-links a:hover,.format-chat .entry-content .page-links a:hover,.format-quote .entry-content .page-links a:hover,.page-links a:hover {color: #95C837;}.iheader.front {background-color: #95C837;}.navigation a,.tx-post-row .tx-folio-title a:hover,.tx-blog .tx-blog-item h3.tx-post-title a:hover {color: #95C837;}.paging-navigation div.navigation > ul > li a:hover,.paging-navigation div.navigation > ul > li.active > a {color: #95C837;	border-color: #95C837;}.comment-author .fn,.comment-author .url,.comment-reply-link,.comment-reply-login,.comment-body .reply a,.widget a:hover {color: #95C837;}.widget_calendar a:hover {	background-color: #95C837;	color: #ffffff;	}.widget_calendar td#next a:hover,.widget_calendar td#prev a:hover {	background-color: #95C837;color: #ffffff;}.site-footer div.widget-area .widget a:hover {color: #95C837;}.site-main div.widget-area .widget_calendar a:hover,.site-footer div.widget-area .widget_calendar a:hover {	background-color: #95C837;color: #ffffff;}.widget a:visited { color: #373737;}.widget a:hover,.entry-header h1.entry-title a:hover,.error404 .page-title:before,.tx-service-icon span i,.tx-post-comm:after {color: #95C837;}.da-dots > span > span {background-color: #95C837;}.iheader,.format-status,.tx-service:hover .tx-service-icon span {background-color: #95C837;}.tx-cta {border-left: 6px solid #95C837;}.paging-navigation #posts-nav > span:hover, .paging-navigation #posts-nav > a:hover, .paging-navigation #posts-nav > span.current, .paging-navigation #posts-nav > a.current, .paging-navigation div.navigation > ul > li a:hover, .paging-navigation div.navigation > ul > li > span.current, .paging-navigation div.navigation > ul > li.active > a {border: 1px solid #95C837;color: #95C837;}.entry-title a { color: #141412;}.tx-service-icon span { border: 2px solid #95C837;}.site-footer .widget-area .widget input[type="submit"],.site .tx-slider .tx-slide-button a,.ibanner .da-slider .owl-item.active .da-link  { background-color: #95C837; color: #FFF; }.site-footer .widget-area .widget input[type="submit"]:hover,.site .tx-slider .tx-slide-button a:hover  { background-color: #373737; color: #FFF; }</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-image: url("https://tencent.github.io/behaviac/contents/ui/theme/images/default-bg.png"); background-position: left top; background-size: auto; background-repeat: repeat; background-attachment: scroll; }
</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>
<body class="post-template-default single single-post postid-166 single-format-standard custom-background nx-boxed twocol-blog sidebar" style="  ">
	<div id="page" class="hfeed site">
    	

        
        <div class="headerwrap">
            <header id="masthead" class="site-header" role="banner">
         		<div class="headerinnerwrap">
					                        <a class="home-link" href="https://tencent.github.io/behaviac/language/zh/index/" title="behaviac" rel="home">
			    <span class="hidden-on-phone">
								<img class="hidden-on-phone" id="tencentOpen" onclick="openUrl('http://opensource.tencent.com/')" src="/tencentOpensource_logo.png" alt="tencent opensource logo">
								<img src="https://tencent.github.io/behaviac/contents/data/2016/04/256x256.png" alt="behaviac" />
								<div class="hidden-on-phone" style="float: right; margin: 0px; padding: 0px; margin-left: 4px;">
									<b style="color: #1994CA; font-size: 24px; margin: 0px;padding:0; line-height: 1.5em; ">behaviac</b>
									<br>
									<b style="margin: 0;padding: 0; margin-top:-4px;color: #cccccc; font-size: 14px;line-height: 1.5em;">wtencent.github.io</b>
								</div>
							</span>
			</a>
	<script>
	function openUrl(url){
		window.open(url);
	}
	</script>
                    	
        
                    <div id="navbar" class="navbar">
                        <nav id="site-navigation" class="navigation main-navigation" role="navigation">
                            <h3 class="menu-toggle"> </h3>
                            <a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
                            <div class="nav-container"><ul id="menu-%e4%b8%ad%e6%96%87%e7%9b%ae%e5%bd%95" class="nav-menu"><li id="menu-item-101" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-101"><a href="https://tencent.github.io/behaviac/language/zh/index/">首页</a></li>
<li id="menu-item-368" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-368"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/">文档</a>
<ul class="sub-menu">
	<li id="menu-item-176" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-176"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/tutorial/">教程</a></li>
	<li id="menu-item-175" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-175"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/articles/">文章</a></li>
	<li id="menu-item-66" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-66"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/manual/">手册</a></li>
	<li id="menu-item-1270" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1270"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/3.5//">3.5</a></li>
	<li id="menu-item-195" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-195"><a href="https://tencent.github.io/behaviac">API</a></li>
</ul>
</li>
<li id="menu-item-198" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-198"><a title="behaviac版本下载页面" href="https://tencent.github.io/behaviac/language/zh/behaviac版本下载/">下载</a>
<ul class="sub-menu">
	<li id="menu-item-1105" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1105"><a href="https://github.com/Tencent/behaviac/">克隆源码</a></li>
	<li id="menu-item-200" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-200"><a title="behaviac版本下载页面" href="https://tencent.github.io/behaviac/language/zh/behaviac版本下载/">下载版本</a></li>
</ul>
</li>
<li id="menu-item-346" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-346"><a href="https://github.com/Tencent/behaviac/issues">问答</a></li>
<li id="menu-item-941" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-941"><a href="https://tencent.github.io/behaviac/language/zh/category/announcement/">公告</a>
<ul class="sub-menu">
	<li id="menu-item-1004" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1004"><a href="https://tencent.github.io/behaviac/language/zh/contactus/">联系我们</a></li>
</ul>
</li>
</ul></div>							
                        </nav><!-- #site-navigation -->
                        <div class="topsearch">
                            <form role="search" method="get" class="search-form" action="https://tencent.github.io/behaviac/language/zh/">
				<label>
					<span class="screen-reader-text">搜索：</span>
					<input type="search" class="search-field" placeholder="搜索&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="搜索" />
			</form>                        </div>
                    </div><!-- #navbar -->
                    <div class="clear"></div>
                </div>
            </header><!-- #masthead -->
        </div>
        
        <!-- #Banner -->
                
        <div class="iheader" style="">
        	<div class="titlebar">
            	
                <h1 class="entry-title">behaviac概述</h1>				                	<div class="nx-breadcrumb">
                <!-- Breadcrumb NavXT 5.4.0 -->
<span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to behaviac." href="https://tencent.github.io/behaviac" class="home"><span property="name">behaviac</span></a><meta property="position" content="1"></span> &gt; <span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to the 文档 category archives." href="https://tencent.github.io/behaviac/language/zh/category/docs/" class="taxonomy category"><span property="name">文档</span></a><meta property="position" content="2"></span> &gt; <span property="itemListElement" typeof="ListItem"><a property="item" typeof="WebPage" title="Go to the 3.5 category archives." href="https://tencent.github.io/behaviac/language/zh/category/docs/3.5//" class="taxonomy category"><span property="name">3.5</span></a><meta property="position" content="3"></span> &gt; <span property="itemListElement" typeof="ListItem"><span property="name">behaviac概述</span><meta property="position" content="4"></span>                	</div>
                               
            	
            </div>
        </div>
        
				<div id="main" class="site-main">


	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
            <article id="post-166" class="post-166 post type-post status-publish format-standard hentry category-3-5- tag-31">
            
                <div class="meta-img">
                                </div>
                
                <div class="post-mainpart">    
                    <header class="entry-header">
                        <div class="entry-meta">
                            <span class="date"><a href="https://tencent.github.io/behaviac/overview/" title="Permalink to behaviac概述" rel="bookmark"><time class="entry-date" datetime="2016-04-11T18:00:46+00:00">2016年4月11日</time> <time>最近更新于：2016年12月19日</time></a></span><span class="categories-links"><a href="https://tencent.github.io/behaviac/language/zh/category/docs/3.5//" rel="category tag">3.5</a></span><span class="tags-links"><a href="https://tencent.github.io/behaviac/language/zh/tag/%e6%a6%82%e5%bf%b5/" rel="tag">概念</a></span><span class="author vcard"><a class="url fn n" href="https://tencent.github.io/behaviac/language/zh/author/admin/" title="View all posts by admin" rel="author">admin</a></span>                                                    </div><!-- .entry-meta -->
                    </header><!-- .entry-header -->
                
                    <div class="entry-content">
                        <div id="ez-toc-container" class="ez-toc-wrap-left counter-hierarchy ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">目录</p>
<span class="ez-toc-title-toggle"><a class="pull-right btn btn-xs btn-default ez-toc-toggle"><i class="glyphicon ez-toc-icon-toggle"></i></a></span></div>
<ul class="ez-toc-list"><li><a href="#1" title="1 项目概况">1 项目概况</a></li><li><a href="#2" title="2 背景">2 背景</a><ul><li><a href="#21" title="2.1 有限状态机">2.1 有限状态机</a></li><li><a href="#22" title="2.2 行为树">2.2 行为树</a></li></ul></li><li><a href="#3_behaviac" title="3 behaviac组件">3 behaviac组件</a><ul><li><a href="#31" title="3.1 类型信息">3.1 类型信息</a><ul><li><a href="#311" title="3.1.1 类型">3.1.1 类型</a></li><li><a href="#312" title="3.1.2 实例">3.1.2 实例</a></li><li><a href="#313" title="3.1.3 变量">3.1.3 变量</a></li><li><a href="#314" title="3.1.4 方法">3.1.4 方法</a></li></ul></li><li><a href="#32" title="3.2 工作区">3.2 工作区</a></li><li><a href="#33" title="3.3 行为树">3.3 行为树</a><ul><li><a href="#331" title="3.3.1 节点与附件">3.3.1 节点与附件</a></li><li><a href="#332" title="3.3.2 预制">3.3.2 预制</a></li><li><a href="#333" title="3.3.3 子树与递归">3.3.3 子树与递归</a></li><li><a href="#334" title="3.3.4 事件处理">3.3.4 事件处理</a></li><li><a href="#335" title="3.3.5 热加载">3.3.5 热加载</a></li></ul></li><li><a href="#34" title="3.4 有限状态机">3.4 有限状态机</a></li><li><a href="#35" title="3.5 调试">3.5 调试</a></li><li><a href="#36" title="3.6 单元测试与">3.6 单元测试与</a></li><li><a href="#37" title="3.7 开源">3.7 开源</a></li></ul></li></ul></div>
<h2 id="section"><span class="ez-toc-section" id="1">1 项目概况</span></h2>
<ul>
<li>behaviac是游戏AI的开发框架组件，也是游戏原型的快速设计工具。支持全平台，适用于客户端和服务器，助力游戏快速迭代开发。</li>
<li>编辑器可以运行在PC上，操作方便直观可靠，支持实时和离线调试；编辑器可以导出xml/bson等多种格式，更可以导出C++/C#源码，提供最高效率。</li>
<li>运行时支持全平台，有C++/C#两个版本，原生支持Unity。</li>
<li>已被多款知名游戏及更多其他预研项目使用。</li>
<li>所有代码（包括编辑器和运行时）已经全部开源：<a href="https://github.com/Tencent/behaviac">https://github.com/Tencent/behaviac</a></li>
</ul>
<h2 id="section-1"><span class="ez-toc-section" id="2">2 背景</span></h2>
<p>游戏AI的目标之一就是要找到一种简单并可扩展的开发逻辑的方案，常用的技术包括有限状态机（FSM）、层次化有限状态机（HFSM）、面向目标的动作规划（GOAP）、层次化任务网络（HTN）等。</p>
<p>行为树作为次时代的AI技术，距其原型提出也约有10年左右，像Halo、Spore、Crysis等大作已经采用。目前，很多知名的游戏引擎也已整合或提供了自己的行为树组件，例如Unreal4、Unity引擎等。</p>
<h3 id="section-2"><span class="ez-toc-section" id="21">2.1 有限状态机</span></h3>
<p>提到有限状态机（Finite State Machine，FSM），很多程序员都相当熟悉。状态机技术在游戏开发中也已变得很成熟和流行，它反映了从系统开始到现在的输入变化。</p>
<ul>
<li>动作（Action）：指在给定时刻要进行的活动的描述。</li>
<li>状态（State）：指对象的某种形态，在当前形态下可能会拥有不同的行为和属性。</li>
<li>转换（Transition）：表示状态变更，并且必须满足确使转移发生的条件来执行。</li>
<li>状态机（State Machine）：控制对象状态的管理器。对象的状态不会无端的改变，它需要在某种条件下才会变换。状态会在某个事件触发之后变更，不同的状态也有可能决定了对象的不同属性和行为。</li>
</ul>
<p>如下图2.1所示，有限状态机维护了一张图，图的节点是一个个的状态，节点和节点的连线是状态间根据一定规则所执行的状态转换，每一个状态内的逻辑都可以简要描述为：</p>
<ul>
<li>如果满足条件1，则跳转到状态1；</li>
<li>如果满足条件2，则跳转到状态2；</li>
<li>…；</li>
<li>否则，不做任何跳转，维持当前状态。</li>
</ul>
<p><img src="https://tencent.github.io/behaviac/img/overview/fsm.png" alt="" /></p>
<p>图2.1 有限状态机</p>
<p>有限状态机有着简单的优势，采用状态机来实现AI更符合思维的朴素表达。对于一些简单的AI，用状态机更加便捷，但是面对一些复杂的AI逻辑就会显得比较繁杂。</p>
<p>同时，当需要对现有行为逻辑进行扩展的时候，代码上会显得比较吃力，因为要维护的状态量会成倍增加。</p>
<p>对于大型的系统，分层有限状态机（HFSM）也支持状态间切换的重用。但是状态机需要用转换连接状态，从而状态失去了模块性。</p>
<h3 id="section-3"><span class="ez-toc-section" id="22">2.2 行为树</span></h3>
<p>行为树（Behavior Tree，BT），使得实现AI的过程变得更加需要技巧。框架设计者较为全面的考虑了可能会遇到的种种情况，把每种情况都抽象成了某个类型的节点，而游戏开发者要做的就是按照规范把各种节点连接成一棵所需的行为树。这样，行为树更加具有面向对象的特征，行为模块间的藕合度相对较低。</p>
<p>概念上，行为树就是一段脚本，以树的形式展现给用户。节点的执行结果由其父节点来管理，决定接下来做什么。由于节点间不再有转换，因此不再称为状态，节点只是行为。</p>
<p>行为树的基本结构如图2.2所示，行为树由叶子节点和中间节点组成，从左到右依次是父子关系的节点：叶子节点主要是一些动作、条件和赋值等原子操作节点，包含了最基本的行为（如跑动、攻击等），当一个叶子节点被选择后，就会激活其对应的基本行为；中间节点主要是一些组合节点，代表逻辑单元，用于管理子节点如何执行等。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/bt.png" alt="" /></p>
<p>图2.2 行为树</p>
<p>叶子节点和中间节点主要分为五大类节点或附件：动作、条件、组合、修饰、附件等。其中，动作、条件节点为叶子节点，组合、修饰节点为中间节点，附件必须附属在这四类节点上面而不能独立存在。</p>
<p>每个节点执行结束后，都必须将其返回值提供给父节点。节点的返回值包括三种：成功（Success）、失败（Failure）以及正在执行（Running）。最基本的行为（叶子节点）可能执行成功也可能失败，高等级的行为（中间节点）是否执行成功依赖于子节点是否执行成功，子节点执行失败可能导致其父节点选择另一个子节点。<br />
行为树中最常用的节点包括：</p>
<ul>
<li>动作节点（Action）：属于叶子节点，用于描述一个最终执行的动作。</li>
<li>条件节点（Condition）：属于叶子节点，用于描述一个条件是否成立。</li>
<li>选择节点（Selector）：属于组合节点，用于顺序执行子节点，只要它的一个子节点返回成功，则整个分支返回成功，反之返回失败，类似程序中的逻辑或（OR）。</li>
<li>顺序节点（Sequence）：属于组合节点，用于顺序执行子节点，只要它的一个子节点返回失败，则整个分支返回失败，反之返回成功，类似程序中的逻辑与（AND）。</li>
</ul>
<p>行为树的执行通过帧循环的更新来驱动，不一定是每帧都需要更新，但是需要周期性的执行。基于效率的考虑，行为树的执行有点类似于协程（Coroutine）的概念。如果有返回正在执行的节点，那么在行为树下一次执行的时候会接着执行。否则，一个返回成功或失败也就是已经结束了的行为树，下一次执行就会从根节点重新开始。</p>
<p>一棵行为树首先需要设置一个Agent类型，Agent也就是游戏中的AI角色。在这棵行为树中的所有节点（主要是叶子节点），可以进一步选择Agent的属性、方法以及其他变量等进行配置。这些Agent的类型、属性、方法等信息，称之为类型信息，后文会更详细的对其进行介绍。</p>
<p>行为树的优势如下：</p>
<ul>
<li>行为逻辑和状态数据分离，任何节点都可以反复利用。</li>
<li>重用性高，可用通过重组不同的节点来实现不同的行为树。</li>
<li>呈线性的方式布局，易扩展。</li>
<li>可配置，把工作交给策划。</li>
</ul>
<h2 id="behaviac"><span class="ez-toc-section" id="3_behaviac">3 behaviac组件</span></h2>
<p>behaviac组件包括编辑器（Designer）和运行时（Runtime）两大部分：编辑器主要用于编辑行为树，运行时库主要用于解释和执行编辑并导出过的行为树，运行时库需要整合到自己的游戏项目中去。<br />
编辑器和运行时之间通过类型信息（Meta）进行交互，如图3.1所示：</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/meta.png" alt="" /></p>
<p>图3.1 基于类型信息的编辑器和运行时端的交互</p>
<h3 id="section-4"><span class="ez-toc-section" id="31">3.1 类型信息</span></h3>
<p>类型信息是behaviac组件的核心，包括Agent的类型、属性、方法以及类的实例名称等信息。游戏中负责运行行为的实体称谓Agent，每个Agent都存有自己的数据或者能执行自己的动作，这样的数据被称为属性（Property），这样的动作被称为方法（Method）。所谓的类型信息就是对一个Agent的描述，包括其属性和方法等。</p>
<p>运行时库产生一个描述Agent类型信息的XML文件。注意图3.1中类型信息的双向箭头，“双向”表示运行时端可以导出类型信息给编辑器使用，在编辑器中也可以编辑并导出类型信息到运行时端。</p>
<p>在运行时端，也即游戏代码端，通过注册（C++通过宏的方式，C#通过标记Attribute的方式，如代码段3.1.1和3.1.2所示）并导出供行为树引擎和编辑器使用的XML类型信息。运行时端主要是由程序员编写Agent子类及其属性和方法，然后调用相关接口将这些类型信息导出，就可以在编辑器中对这些类型信息进行使用。</p>
<div class="highlighter-rouge">
<pre class="highlight"><code>
<span class="n">BEGIN_PROPERTIES_DESCRIPTION</span><span class="p">(</span><span class="n">AgentNodeTest</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//CLASS_DISPLAYNAME(L"测试behaviac::Agent")
</span>    <span class="c1">//CLASS_DESC(L"测试behaviac::Agent的说明")
</span>    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">testVar_0</span><span class="p">);</span>
    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">testVar_1</span><span class="p">).</span><span class="n">DISPLAYNAME</span><span class="p">(</span><span class="s">L"testVar_1"</span><span class="p">).</span><span class="n">DESC</span><span class="p">(</span><span class="s">L"testVar_1 property"</span><span class="p">).</span><span class="n">RANGE</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">testVar_2</span><span class="p">);</span>
    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">testVar_3</span><span class="p">);</span>
    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">waiting_timeout_interval</span><span class="p">);</span>
    <span class="n">REGISTER_PROPERTY</span><span class="p">(</span><span class="n">testVar_str_0</span><span class="p">);</span>

    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setEventVarInt</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setEventVarBool</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setEventVarFloat</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setEventVarAgent</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">getConstOne</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_0</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_1</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_2</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_0_2</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_R</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">setTestVar_3</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">enter_action_0</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">exit_action_0</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">enter_action_1</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">exit_action_1</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">enter_action_2</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">exit_action_2</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">createGameObject</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">testGameObject</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">createExtendedNode</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">testExtendedRefType</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">testExtendedStruct</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">switchRef</span><span class="p">);</span>

    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">CanSeeEnemy</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">Move</span><span class="p">);</span>
    <span class="n">REGISTER_METHOD</span><span class="p">(</span><span class="n">MoveToTarget</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">END_PROPERTIES_DESCRIPTION</span><span class="p">()</span>

</code></pre>
</div>
<p>代码3.1.1 在C++中通过宏注册类型信息</p>
<figure class="highlight">
<pre><code class="language-cs" data-lang="cs"><span class="na">[behaviac.TypeMetaInfo()]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">AgentNodeTest</span> <span class="p">:</span> <span class="n">behaviac</span><span class="p">.</span><span class="n">Agent</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">testVar_0</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">(</span><span class="s">"testVar_1"</span><span class="p">,</span> <span class="s">"testVar_1 property"</span><span class="p">,</span> <span class="m">100</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">testVar_1</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">testVar_2</span> <span class="p">=</span> <span class="p">-</span><span class="m">1.0f</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">testVar_3</span> <span class="p">=</span> <span class="p">-</span><span class="m">1.0f</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">waiting_timeout_interval</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">testVar_str_0</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

    <span class="p">[</span><span class="n">behaviac</span><span class="p">.</span><span class="nf">MemberMetaInfo</span><span class="p">()]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">testVar_str_1</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="n">m_bCanSee</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">event_test_var_int</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">bool</span> <span class="n">event_test_var_bool</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">event_test_var_float</span> <span class="p">=</span> <span class="p">-</span><span class="m">1.0f</span><span class="p">;</span>
    <span class="k">public</span> <span class="n">AgentNodeTest</span> <span class="n">event_test_var_agent</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</figure>
<p>代码3.1.2 在C#中通过Attribute标记类型信息</p>
<p>此外，behaviac组件的特色之一就是编辑器中也可以创建和编辑类型信息。编辑器主要交给策划编辑行为树，也可以编辑类型信息。策划在项目开始初期，也就是程序员还没把代码写出来之前，策划就可以自己手动的创建一些Agent类型、属性和方法等类型信息。这样可以加速游戏原型的创建，也就是策划不用等程序员，就可以进行游戏原型的编辑。</p>
<p>如图3.1.3所示，打开编辑器中提供的类型信息浏览器，可以查看或新建Agent类型。选中其中一个Agent类型之后，可以查看它的属性、方法等信息，并可以扩展Agent类型的成员属性和方法等，还支持新建枚举和结构体类型等。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/metabrowser.png" alt="" /></p>
<p>图3.1.3 在类型信息浏览器中查看和编辑类型信息</p>
<h4 id="section-5"><span class="ez-toc-section" id="311">3.1.1 类型</span></h4>
<p>类型（Type）分为Agent、枚举和结构体等。</p>
<ul>
<li>Agent类：作为行为树的基本组成元素，是供其他游戏类派生的基类，在图3.1.3所示的类型信息浏览器中，我们可以查看所有导出和创建的Agent类型，这些Agent类型又包含变量和方法两大部分。可以在类型信息浏览器中添加自己的Agent子类，为其添加成员属性和方法，但方法的实现需要另外编写需要的逻辑代码。</li>
<li>枚举：游戏端的用到枚举类型会导出在类型信息文件中，也可以在类型信息浏览器中添加自己的枚举类型，并可以导出生成C++或C#源码，再添加到游戏端代码中。</li>
<li>结构体：游戏端的用到结构体类型会导出在类型信息文件中，也可以在类型信息浏览器中添加自己的结构体类型，但只能为其增加成员属性，不能添加成员方法，可以导出生成C++或C#源码，添加到游戏端代码中。</li>
</ul>
<p>如图3.1.1.1所示，在新建一棵行为树时，首先需要为根节点选择一种Agent类型，以表明当前新建的行为树是用的哪种Agent，该行为树的所有叶子节点将可以使用该Agent类型的属性和方法。</p>
<p><img src="https://tencent.github.io/behaviac/img/articles/agenttype_selector.png" alt="" /></p>
<p><img src="https://tencent.github.io/behaviac/img/overview/agenttype.png" alt="" /></p>
<p>图3.1.1.1 为根节点设置Agent类型</p>
<h4 id="section-6"><span class="ez-toc-section" id="312">3.1.2 实例</span></h4>
<p>上面已经提及了一棵行为树需要设置它的Agent类型，以便于所有叶子节点使用该Agent类型的属性和方法。对于这种情况，我们称之为使用自身（Self）的属性和方法。</p>
<p>另一方面，某个节点的参数可能会用到不是自身的属性或方法，这时就需要首先选择实例（Instance），然后再选择该实例所属的Agent类型的属性或方法，如图3.1.2.1所示。</p>
<p>所有Agent类的实例在运行时端需要通过注册并导出到类型信息文件中，这样编辑器拿到所有的实例列表后就可以一一列举出来以供选择，具体注册方法详见使用手册。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/properties.png" alt="" /></p>
<p>图3.1.2.1 为条件节点设置左参数</p>
<h4 id="section-7"><span class="ez-toc-section" id="313">3.1.3 变量</span></h4>
<p>变量分为成员字段（Field）、属性（Property）、自定义的属性以及局部变量等。</p>
<ul>
<li>成员字段：也即面向对象编程（C++/C#）中类的字段。</li>
<li>成员属性：也即C#中类的属性，带有getter和setter。</li>
<li>自定义的属性：主要是在编辑器中为Agent类型新建出来的成员属性。在变量前有一个‘*’星号标识。如下图。</li>
<li>局部变量：在变量前有一个‘-’减号标识。相对于成员属性和自定义的属性这些全局属性而言。为什么称之为全局属性？在整个游戏项目中，可能会有很多棵行为树，我们称之为工作区来管理所有的行为树。每一种Agent类型的成员属性和自定义的属性是可以供这个工作区中的所有行为树选择使用的，而局部变量只是针对某一棵行为树，局限于在这一棵行为树中所使用的变量。</li>
</ul>
<p><img src="https://tencent.github.io/behaviac/img/overview/variable_indicator.png" alt="" /></p>
<p>behaviac组件支持变量的只读（Readonly）特性，这样在编辑器中只可以对该属性进行读取，但不能为其赋值。局部变量不仅支持int、float、bool、枚举等基本的数据类型，也支持复杂的指针或引用类型。</p>
<h4 id="section-8"><span class="ez-toc-section" id="314">3.1.4 方法</span></h4>
<p>方法包括成员方法、自定义的方法、任务（Task）等。</p>
<ul>
<li>成员方法：也即面向对象编程中类的成员方法。</li>
<li>自定义的方法：在编辑器中创建出来的方法。自定义的方法只是作为占位符，允许设计人员可以继续工作。使用了自定义方法的行为树不允许导出。只有当程序员实现了该方法后，自定义方法变成了成员方法后该行为树才允许被导出。这个设定是为了保证导出的行为树是可以执行的。</li>
<li>任务：用于描述子树所需的接口，包括接口名和参数列表，跟方法的定义类似。后文将结合子树的概念，对任务的用法进行更详细的说明。</li>
</ul>
<p>最后，在编辑器中就可以根据导出和创建的类型信息，对行为树进行编辑。在行为树的每个节点上可以根据需要选择或设置属性、方法及其参数等，如图3.1.4.1所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/action.png" alt="" /></p>
<p>图3.1.4.1 编辑节点的属性</p>
<h3 id="section-9"><span class="ez-toc-section" id="32">3.2 工作区</span></h3>
<p>采用behaviac组件开始项目时，首先需要在编辑器中创建一个工作区（Workspace）。</p>
<p>工作区文件以.workspace.xml为后缀名，是管理游戏项目中所有行为树文件的配置文件，如图3.2.1所示：</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/workspace.png" alt="" /></p>
<p>图3.2.1 工作区文件</p>
<p>该配置文件可以指定XML类型信息文件、行为树源文件的路径、导出文件的路径等，可以通过编辑器中的“新建工作区”或“编辑工作区”工具编辑相关设置，如图3.2.2所示：</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/editworkspace.png" alt="" /></p>
<p>图3.2.2 编辑工作区</p>
<p>行为树源文件和导出文件的区别在于，行为树源文件是在编辑器中供策划编辑使用的初始源文件（XML格式），包含了很多冗余的信息，比如UI显示所需的属性等。而导出文件是一种精简版的行为树文件，只是给运行时端使用的一种高效的执行文件。</p>
<p>源文件就像那些Raw Data，必须导出后才能在运行时中使用，而导出文件就像那些处理过并在游戏中直接使用的Game Data。工作区文件、源文件、类型信息文件等在游戏中都不再需要，游戏中只需要导出的文件。</p>
<p>目前支持XML、BSON、C++和C#四种导出格式。其中，XML/BSON主要用于开发阶段，C++/C#主要用于最后的发布。C++/C#的内存和性能明显要优于XML/BSON的格式，所以我们建议在最后的发布过程，使用C++/C#的行为树导出文件。</p>
<h3 id="section-10"><span class="ez-toc-section" id="33">3.3 行为树</span></h3>
<p>behaviac组件提供了数量繁多、功能齐全的节点和附件，并支持扩展自己所需的节点类型。此外，behaviac组件还支持子树、事件、预制等高级用法，下面将一一进行介绍。</p>
<h4 id="section-11"><span class="ez-toc-section" id="331">3.3.1 节点与附件</span></h4>
<p>前面已经介绍，行为树的节点主要分为五大类节点或附件：动作、条件、组合、修饰、附件等，如图3.3.1所示。其中，动作、条件节点为叶子节点，组合、修饰节点为中间节点，附件必须附属在这四类节点上面而不能独立存在。</p>
<p>behaviac组件还支持扩展新的节点类型，具体用法可以详见使用手册中的介绍。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/nodes.png" alt="" /></p>
<p>图3.3.1.1 行为树的节点和附件</p>
<p>为了支持子树（Subtree）的功能，behaviac组件还提供了引用节点（ReferencedBehavior）类型，后文将对子树和引用节点详细介绍。</p>
<p>节点可以具有前置（Preaction）和后置（Postaction）等附件，如图3.3.2所示。前置可以表示执行某个条件或者某个操作，如果是条件，那么前置必须返回成功后才能继续执行所在的节点，否则直接返回到父节点。而后置只用于表示该节点执行完毕后继续执行的操作。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/attachments.png" alt="" /></p>
<p>图3.3.1.2 节点上的前置和后置</p>
<p>还有一种附件比较特殊，也即事件（Event）。事件是将一棵行为树作为另一棵行为树中某个节点（一般为根节点）的附件，用于响应事件发生时行为树的切换。后文将对事件进行更详细的说明。</p>
<p>为了支持某些特殊应用，behaviac组件还为序列（Sequence）、选择（Selector）等组合节点添加了中断条件（Interrupted Condition），如图3.3.1.3所示。增加中断条件是为了让序列节点（或其他组合节点）在依次执行每个子节点的时候，都需要根据该中断条件的执行结果，来判断是否需要执行当前子节点。也即，所有的子节点有一个统一的中断条件被打断执行。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/interupt.png" alt="" /></p>
<p>图3.3.1.3 中断条件</p>
<p>在编辑器中，可以通过鼠标拖拽这些节点到新建的行为树中，或拖拽前置和后置附件到某个节点上。</p>
<h4 id="section-12"><span class="ez-toc-section" id="332">3.3.2 预制</span></h4>
<p>为了方便或加速行为树的编辑，behaviac编辑器提供了预制（Prefab）的功能，以便利于复用已经编辑好的行为树。</p>
<p>behaviac组件的预制跟Unity引擎中的预制工作机制类似，如果在用到预制的地方改变了预制中某个节点的属性，那么就会在所在的行为树中创建一份该预制的实例（Instance）。如果没有改变预制中任何节点的属性，则直接跟预制母体的属性保持一致，也即修改了预制中任何节点的属性，用到该预制的其他行为树也跟着同步改变。</p>
<p>在编辑器中，可以将已经编辑好的行为树另存为预制，这些预制会组织在Prefabs目录下，以便区分于项目所需的行为树（归类在Behaviors目录下），如图3.3.2.1所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/behaviors.png" alt="" /></p>
<p>图3.3.2.1 行为树与预制</p>
<p>如图3.3.2.2所示，先构建了一个预制行为树“Prefab_安全的随机移动”。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/prefab.png" alt="" /></p>
<p>图3.3.2.2 预制</p>
<p>如图3.3.2.3所示，再将该行为树拖拽进行为树Tank_SafeWander_RandomFire中，可以看到该预制行为树会得到展开并复制过去，这加速了行为树的编辑，提高了开发工作的效率。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/prefabinstance.png" alt="" /></p>
<p>图3.3.2.3 使用预制的行为树</p>
<h4 id="section-13"><span class="ez-toc-section" id="333">3.3.3 子树与递归</span></h4>
<p>在编辑器中，可以通过鼠标拖拽一棵行为树到另一棵行为树中，并作为引用节点（ReferencedBehavior）添加到另一棵行为树上。如图3.3.3.1所示，action_ut_0就是action_ut_1的子树，action_ut_0所在的节点是一个引用节点。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/subtree.png" alt="" /></p>
<p>图3.3.3.1 子树</p>
<p>有了子树的功能，behaviac组件自然也支持了“递归”的功能，只要将当前行为树作为自己的子树即可。形成递归的时候需要注意不要造成死循环，这可以通过变量的使用来避免。</p>
<p>如图3.3.3.2所示，利用testVar_0来避免死循环：第一次进入的时候testVar_0 == 0，所以可以执行下面的序列，先把testVar_0赋值为1，那么在下面的递归重入的时候由于testVar_0 == 1，所以testVar_0 == 0的条件不满足，所以下面的序列不会进入从而避免了死循环。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/reverse.png" alt="" /></p>
<p>图3.3.3.2 递归</p>
<h4 id="section-14"><span class="ez-toc-section" id="334">3.3.4 事件处理</span></h4>
<p>执行行为树的过程中，当状态、条件发生变化或发生事件（Event）时如何响应或打断当前的执行是个重要的问题。</p>
<p>请详看文档《<a href="https://tencent.github.io/behaviac/docs/zh/tutorials/tutorial11_event/">事件处理</a>》。</p>
<h4 id="section-15"><span class="ez-toc-section" id="335">3.3.5 热加载</span></h4>
<p>behaviac组件中的编辑器和运行时库都支持热加载，但是只针对XML/BSON格式的行为树文件。</p>
<p>在编辑器中，只要当前打开的行为树文件在编辑器外由于某种原因得到修改（例如通过项目中的文件版本管理系统强制同步行为树文件，或者通过文本编辑器强制修改行为树XML文件等），那么都可以自动的在编辑器中得到刷新。</p>
<p>对于运行时端（或游戏端），只要在编辑器中修改了行为树文件并重新导出，那么在游戏运行过程中不用退出游戏，最新导出的行为树可以自动进行加载，这样就可以及时查看行为树最新的效果。</p>
<p>请详看文档《<a href="https://tencent.github.io/behaviac/docs/zh/tutorials/tutorial12_hotreload/">热加载</a>》。</p>
<h3 id="section-16"><span class="ez-toc-section" id="34">3.4 有限状态机</span></h3>
<p>除了上面提及的行为树，behaviac组件还支持传统的有限状态机（FSM）。在前面的2.1章节已经说明，有限状态机主要由状态（State）和转换（Transition）构成，如图3.4.1所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/fsm.png" alt="" /></p>
<p>图3.4.1 有限状态机</p>
<p>类似于前面提及的行为树子树的概念，behaviac组件的一大特色就是支持将编辑好的一个有限状态机整体作为另一个有限状态机的“子树”，甚至有限状态机还可以跟行为树交替引用，互相作为彼此的子树，也即一个有限状态机可以整体作为一棵行为树的“引用节点”，同时一棵行为树也可以整体作为一个有限状态机中的“引用状态”。</p>
<p>在behaviac编辑器中，状态是作为类似行为树的节点一样独立存在，而转换是为类似行为树中的附件一样挂在某个状态上。有限状态机的编辑也很简单，只需要通过鼠标拖拽“状态”节点和“转换”附件到新建的有限状态机中，如图3.4.2所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/states.png" alt="" /></p>
<p>图3.4.2 有限状态机的状态和转换</p>
<p>类似于行为树中的节点，还可以为有限状态机中的状态节点添加前置和后置附件，以表示执行到当前状态节点时，所需要执行的前置条件和后置操作。</p>
<h3 id="section-17"><span class="ez-toc-section" id="35">3.5 调试</span></h3>
<p>编辑器支持跟游戏端进行连调，如图3.5.1所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/connect.png" alt="" /></p>
<p>图3.5.1 连接游戏</p>
<p>支持查看属性的变化（图3.5.2）、在节点上设置断点（图3.5.3）、高亮显示行为树的执行路径（图3.5.3）以及记录每帧信息以便后续查看等功能。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/agentproperties.png" alt="" /></p>
<p>图3.5.2 查看Agent的属性</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/breakpoints.png" alt="" /></p>
<p>图3.5.3 设置断点以及高亮显示执行路径</p>
<h3 id="demo"><span class="ez-toc-section" id="36">3.6 单元测试与</span></h3>
<p>为了方便入门，behaviac组件提供了C++和C#两种编程语言的单元测试以及游戏Demo，可以通过编辑器中的菜单项“帮助”-&gt;“控制说明” 进入，然后点击快速打开所需的单元测试或游戏Demo所用到的工作区，如图3.6.1所示。</p>
<p><img src="https://tencent.github.io/behaviac/img/overview/demo.png" alt="" /></p>
<p>图3.6.1 单元测试与Demo</p>
<h3 id="section-18"><span class="ez-toc-section" id="37">3.7 开源</span></h3>
<p>behaviac组件已在github上开源，网址是<a href="https://github.com/Tencent/behaviac">https://github.com/Tencent/behaviac</a>，可以下载最新的安装包、源码以及相关文档等。</p>
<p>另外，behaviac视频讲解的链接为：<a href="http://gad.qq.com/tool/detail/2">http://gad.qq.com/tool/detail/2</a></p>
                                            </div><!-- .entry-content -->

                	                </div>
            </article><!-- #post -->    
    

					<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">

			<a href="https://tencent.github.io/behaviac/language/zh/concepts/" rel="prev"><span class="meta-nav">&larr;</span> 行为树的基本概念及进阶</a>			<a href="https://tencent.github.io/behaviac/language/zh/tutorial13_updateloop/" rel="next">运行时端的执行流程 <span class="meta-nav">&rarr;</span></a>
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
					
<div id="comments" class="comments-area">

			<h2 class="comments-title">
			2 thoughts on &ldquo;<span>behaviac概述</span>&rdquo;		</h2>

		<ol class="comment-list">
					<li id="comment-350" class="comment even thread-even depth-1 parent">
			<article id="div-comment-350" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/331d41bb3189eb91da6032b51d62c487?s=74&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/331d41bb3189eb91da6032b51d62c487?s=148&#038;d=mm&#038;r=g 2x' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">曹海涛</b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://tencent.github.io/behaviac/overview/#comment-350">
							<time datetime="2017-02-16T16:37:40+00:00">
								2017年2月16日 16:37							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>behaviac是行为树与有限状态机的结合吗？</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://tencent.github.io/behaviac/overview/' onclick='return addComment.moveForm( "div-comment-350", "350", "respond", "166" )' aria-label='回复给曹海涛'>回复</a></div>			</article><!-- .comment-body -->
<ol class="children">
		<li id="comment-351" class="comment byuser comment-author-admin bypostauthor odd alt depth-2">
			<article id="div-comment-351" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://2.gravatar.com/avatar/b17a49b489766126063e69cdfcf1e916?s=74&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/b17a49b489766126063e69cdfcf1e916?s=148&#038;d=mm&#038;r=g 2x' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">admin</b><span class="says">说道：</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="https://tencent.github.io/behaviac/overview/#comment-351">
							<time datetime="2017-02-16T16:47:56+00:00">
								2017年2月16日 16:47							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>behaviac是游戏AI的开发框架组件。开发者在我们的behaviac上可以创建和使用行为树，同样可以创建和使用fsm和htn。behaviac更支持他们之间互相调用，比如行为树中调用状态机，状态机的也同样可以调用某个行为树。虽然behaviac支持行为树，有限状态机和HTN，但不是他们简单的结合。</p>
				</div><!-- .comment-content -->

				<div class="reply"><a rel='nofollow' class='comment-reply-link' href='https://tencent.github.io/behaviac/overview/' onclick='return addComment.moveForm( "div-comment-351", "351", "respond", "166" )' aria-label='回复给admin'>回复</a></div>			</article><!-- .comment-body -->
</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
		
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/overview/#respond" style="display:none;">取消回复</a></small></h3>			<form action="https://tencent.github.io/behaviac/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="comment-notes"><span id="email-notes">电子邮件地址不会被公开。</span> 必填项已用<span class="required">*</span>标注</p><p class="comment-form-comment"><label for="comment">评论</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">姓名 <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">电子邮件 <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">站点</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type='hidden' name='comment_post_ID' value='166' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p>		<p class="antispam-group antispam-group-q" style="clear: both;">
			<label>Current ye@r <span class="required">*</span></label>
			<input type="hidden" name="antspm-a" class="antispam-control antispam-control-a" value="2018" />
			<input type="text" name="antspm-q" class="antispam-control antispam-control-q" value="4.3" autocomplete="off" />
		</p>
		<p class="antispam-group antispam-group-e" style="display: none;">
			<label>Leave this field empty</label>
			<input type="text" name="antspm-e-email-url-website" class="antispam-control antispam-control-e" value="" autocomplete="off" />
		</p>
			</form>
			</div><!-- #respond -->
	
</div><!-- #comments -->
			
		</div><!-- #content -->
			<div id="tertiary" class="sidebar-container" role="complementary">
		<div class="sidebar-inner">
			<div class="widget-area" id="sidebar-widgets">
				<aside id="search-7" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://tencent.github.io/behaviac/language/zh/">
				<label>
					<span class="screen-reader-text">搜索：</span>
					<input type="search" class="search-field" placeholder="搜索&hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="搜索" />
			</form></aside><aside id="tag_cloud-10" class="widget widget_tag_cloud"><h3 class="widget-title">标签</h3><div class="tagcloud"><a href="https://tencent.github.io/behaviac/language/zh/tag/c/" class="tag-cloud-link tag-link-63 tag-link-position-1" style="font-size: 16.828828828829pt;" aria-label="C++ (9个项目)">C++</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/unity/" class="tag-cloud-link tag-link-65 tag-link-position-2" style="font-size: 13.045045045045pt;" aria-label="unity (4个项目)">unity</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e4%b8%8a%e6%89%8b/" class="tag-cloud-link tag-link-61 tag-link-position-3" style="font-size: 19.72972972973pt;" aria-label="上手 (16个项目)">上手</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e4%ba%8b%e4%bb%b6/" class="tag-cloud-link tag-link-67 tag-link-position-4" style="font-size: 13.045045045045pt;" aria-label="事件 (4个项目)">事件</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e4%bc%98%e5%8c%96/" class="tag-cloud-link tag-link-51 tag-link-position-5" style="font-size: 10.27027027027pt;" aria-label="优化 (2个项目)">优化</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e5%ae%89%e8%a3%85/" class="tag-cloud-link tag-link-49 tag-link-position-6" style="font-size: 8pt;" aria-label="安装 (1个项目)">安装</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e6%89%8b%e5%86%8c/" class="tag-cloud-link tag-link-41 tag-link-position-7" style="font-size: 22pt;" aria-label="手册 (25个项目)">手册</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e6%89%a9%e5%b1%95/" class="tag-cloud-link tag-link-69 tag-link-position-8" style="font-size: 14.936936936937pt;" aria-label="扩展 (6个项目)">扩展</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/教程/" class="tag-cloud-link tag-link-47 tag-link-position-9" style="font-size: 8pt;" aria-label="教程 (1个项目)">教程</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e6%a6%82%e5%bf%b5/" class="tag-cloud-link tag-link-31 tag-link-position-10" style="font-size: 15.567567567568pt;" aria-label="概念 (7个项目)">概念</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e6%a6%82%e8%bf%b0/" class="tag-cloud-link tag-link-59 tag-link-position-11" style="font-size: 11.783783783784pt;" aria-label="概述 (3个项目)">概述</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e7%89%88%e6%9c%ac%e5%8d%87%e7%ba%a7/" class="tag-cloud-link tag-link-37 tag-link-position-12" style="font-size: 8pt;" aria-label="版本升级 (1个项目)">版本升级</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e7%ab%9e%e5%93%81%e5%88%86%e6%9e%90/" class="tag-cloud-link tag-link-29 tag-link-position-13" style="font-size: 8pt;" aria-label="竞品分析 (1个项目)">竞品分析</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e7%bc%96%e8%af%91%e6%9e%84%e5%bb%ba/" class="tag-cloud-link tag-link-13 tag-link-position-14" style="font-size: 14.936936936937pt;" aria-label="编译构建 (6个项目)">编译构建</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e7%bc%96%e8%be%91%e5%99%a8/" class="tag-cloud-link tag-link-11 tag-link-position-15" style="font-size: 16.198198198198pt;" aria-label="编辑器 (8个项目)">编辑器</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e8%8a%82%e7%82%b9/" class="tag-cloud-link tag-link-43 tag-link-position-16" style="font-size: 21.873873873874pt;" aria-label="节点 (24个项目)">节点</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e8%bf%90%e8%a1%8c%e6%97%b6/" class="tag-cloud-link tag-link-27 tag-link-position-17" style="font-size: 18.216216216216pt;" aria-label="运行时 (12个项目)">运行时</a>
<a href="https://tencent.github.io/behaviac/language/zh/tag/%e8%bf%9e%e8%b0%83/" class="tag-cloud-link tag-link-81 tag-link-position-18" style="font-size: 11.783783783784pt;" aria-label="连调 (3个项目)">连调</a></div>
</aside>		<aside id="recent-posts-6" class="widget widget_recent_entries">		<h3 class="widget-title">最新文章</h3>		<ul>
											<li>
					<a href="https://tencent.github.io/behaviac/3-6-39/">最新版3.6.39发布了！</a>
									</li>
											<li>
					<a href="https://tencent.github.io/behaviac/intro/">节点类型的简单介绍</a>
									</li>
											<li>
					<a href="https://tencent.github.io/behaviac/version3_6_38/">最新版3.6.38发布了！</a>
									</li>
											<li>
					<a href="https://tencent.github.io/behaviac/version3_6_36/">最新版3.6.36发布了！</a>
									</li>
											<li>
					<a href="https://tencent.github.io/behaviac/%e6%9c%80%e6%96%b0%e7%89%883-6-35%e5%8f%91%e5%b8%83%e4%ba%86%ef%bc%81/">最新版3.6.35发布了！</a>
									</li>
					</ul>
		</aside><aside id="polylang-11" class="widget widget_polylang"><ul>
	<li class="lang-item lang-item-5 lang-item-zh current-lang no-translation"><a hreflang="zh-CN" href="https://tencent.github.io/behaviac/language/zh/index/"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg==" title="中文 (中国) (zh_CN)" alt="中文 (中国)" />&nbsp;中文 (中国)</a></li>
	<li class="lang-item lang-item-2 lang-item-en no-translation"><a hreflang="en-US" href="https://tencent.github.io/behaviac/language/en/index/"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC" title="English (en_US)" alt="English" />&nbsp;English</a></li>
</ul>
</aside><aside id="meta-9" class="widget widget_meta"><h3 class="widget-title">功能</h3>			<ul>
						<li><a href="https://tencent.github.io/behaviac/wp-login.php">登录</a></li>
			<li><a href="https://tencent.github.io/behaviac/language/zh/feed/">文章<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://tencent.github.io/behaviac/language/zh/comments/feed/">评论<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>			</ul>
			</aside>                			</div><!-- .widget-area -->
		</div><!-- .sidebar-inner -->
	</div><!-- #tertiary -->
	</div><!-- #primary -->



		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
        	<div class="footer-bg clearfix">
                <div class="widget-wrap">
                                    </div>
			</div>

			<div class="site-info">

                <div class="copyright">
					<p class="footermenu">
						<a href="http://www.tencent.com/" target="new" title="关于腾讯">关于腾讯</a>|
						<a href="http://www.tencent.com/index_e.shtml" target="new" title="About Tencent">About Tencent</a>|
						<a href="http://www.qq.com/contract.shtml" target="new" title="服务协议">服务协议</a>|
						<a href="http://open.qq.com/" target="new" title="开放平台">开放平台</a>|
						<a href="http://www.tencentmind.com/" target="new" title="广告服务">广告服务</a>|
						<a href="http://www.tencent.com/about/corp.shtml" target="new" title="商务洽谈">商务洽谈</a>|
						<a href="http://hr.tencent.com/" target="new" title="腾讯招聘">腾讯招聘</a>|
						<a href="http://www.qq.com/" target="new" title="腾讯网">腾讯网</a>|
						<a href="http://gongyi.qq.com/" target="new" title="腾讯公益">腾讯公益</a>|
						<a href="http://service.qq.com/" target="new" title="客服中心">客服中心</a>|
						<a href="http://www.qq.com/map/" target="new" title="网站导航">网站导航</a>|
						<a href="http://www.tencent.com/law/mo_law.shtml?/law/copyright.htm" target="new" title="版权所有">版权所有</a>
					</p>
					Copyright &copy; 1998-2015 Tencent, All Rights Reserved
                	<br/>
					腾讯公司 版权所有<br>
					备案：粤B2-20090059-185
                </div>            
            	<div class="credit-info">

					<a hreflang="zh-CN" href="https://tencent.github.io/behaviac/language/zh/index/">&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAFqSURBVHjaYrzOwPAPjJgYQEDAleHVbhADIvgHLPgHiQ0QQCxAlkR9NW8sw+cV/1gV/7Gb/hV4+vfzhj8Mv/78//Pn/+/f/8AkhH1t0yaAAAJp4I37zyz2lDfu79uqv/++/WYz+cuq/vvLxt8gdb+A5K9/v34B2SyyskBLAAII5JAva/7/+/z367a/f3/8ZuT9+//Pr78vQUrB6n4CSSj6/RuoASCAWEDO/fD3ddEfhv9/OE3/sKj8/n7k9/fDQNUIs/+DVf8HawAIIJCT/v38C3Hr95N/GDh/f94AVvT7N8RUBpjxQAVADQABBNLw/y/Ifwy/f/399ufTOpDBEPf8g5sN0QBEDAwAAQTWABEChgOSA9BVA00E2wAQQCANQBbEif/AzoCqgLkbbBYwWP/+//sXqBYggFhAkfL7D7OkJFCOCSj65zfUeFjwg8z++/ffX5AGoGKAAGI8jhSRyIw/SJH9D4aAYQoQYAA6rnMw1jU2vQAAAABJRU5ErkJggg==" title="中文 (中国) (zh_CN)" alt="中文 (中国)">中文</a>
					<a hreflang="en-US" href="https://tencent.github.io/behaviac/language/en/index/"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAALCAIAAAD5gJpuAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHzSURBVHjaYkxOP8IAB//+Mfz7w8Dwi4HhP5CcJb/n/7evb16/APL/gRFQDiAAw3JuAgAIBEDQ/iswEERjGzBQLEru97ll0g0+3HvqMn1SpqlqGsZMsZsIe0SICA5gt5a/AGIEarCPtFh+6N/ffwxA9OvP/7//QYwff/6fZahmePeB4dNHhi+fGb59Y4zyvHHmCEAAAW3YDzQYaJJ93a+vX79aVf58//69fvEPlpIfnz59+vDhw7t37968efP3b/SXL59OnjwIEEAsDP+YgY53b2b89++/awvLn98MDi2cVxl+/vl6mituCtBghi9f/v/48e/XL86krj9XzwEEEENy8g6gu22rfn78+NGs5Ofr16+ZC58+fvyYwX8rxOxXr169fPny+fPn1//93bJlBUAAsQADZMEBxj9/GBxb2P/9+S/R8u3vzxuyaX8ZHv3j8/YGms3w8ycQARmi2eE37t4ACCDGR4/uSkrKAS35B3TT////wADOgLOBIaXIyjBlwxKAAGKRXjCB0SOEaeu+/y9fMnz4AHQxCP348R/o+l+//sMZQBNLEvif3AcIIMZbty7Ly6t9ZmXl+fXj/38GoHH/UcGfP79//BBiYHjy9+8/oUkNAAHEwt1V/vI/KBY/QSISFqM/GBg+MzB8A6PfYC5EFiDAABqgW776MP0rAAAAAElFTkSuQmCC" title="English (en_US)" alt="English">English</a>
					<br>
					<img src="https://tencent.github.io/behaviac/img/QR_code.png" height="100" class="hidden-on-phone" alt="behaviac website's QR code">
					<br>
					<a href="https://tencent.github.io/behaviac/language/zh/contactus/">联系我们</a>
					<a href="http://www.behaviac.org/" title="Semantic Personal Publishing Platform">
						Powered by behaviac.com                    </a>


                </div>

			</div><!-- .site-info -->
		</footer><!-- #colophon -->

	</div><!-- #page -->
<script>
//baidu and google stats
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71830575-1', 'auto');
  ga('send', 'pageview');

 
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?f4bf91f241741b47ba932bf2129763b7";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();

</script>
	<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAS3.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushColdFusion.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushClojure.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDelphi.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDiff.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushErlang.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushFSharp.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushGroovy.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJavaFX.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushLatex.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushMatlabKey.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushObjC.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPerl.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPowerShell.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/third-party-brushes/shBrushR.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushScala.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushVb.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "https://tencent.github.io/behaviac/contents/lib/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '帮助';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = '无法找到Brush：';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush不能设置 html-script选项';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/anti-spam/js/anti-spam-4.3.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/inc/js/imagesloaded.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/inc/js/masonry.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/inc/js/jquery/jquery.masonry.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/js/owl.carousel.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/js/jquery.colorbox-min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/templatesnext-toolkit/js/tx-script.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/ui/theme/js/waypoints.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/ui/theme/js/jquery.sidr.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/ui/theme/js/functions.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/vendor/smooth-scroll/jquery.smooth-scroll.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/vendor/js-cookie/js.cookie.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/vendor/sticky-kit/jquery.sticky-kit.min.js'></script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/vendor/waypoints/jquery.waypoints.min.js'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"1","width":"25%","scroll_offset":"30"};
/* ]]> */
</script>
<script type='text/javascript' src='https://tencent.github.io/behaviac/contents/lib/easy-table-of-contents/assets/js/front.min.js'></script>
</body>
</html>